<Window x:Class="NotePads.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:NotePads"
        xmlns:popc="clr-namespace:PopEye.WPF.Controls;assembly=PopEye.WPF"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        mc:Ignorable="d" Icon="{DynamicResource Icon}" Topmost="{Binding ElementName=KeepToper, Path=IsChecked}"
        Title="NotePads - 未打开文件" MinHeight="450" MinWidth="800" Background="{DynamicResource MaterialDesignBackground}">
    <Window.Resources>
        <ResourceDictionary>
            <BitmapImage x:Key="Icon" UriSource="Icon.png"/>

            <local:ShouldTextWrap x:Key="stw"/>
            <local:Format_FontSize x:Key="fmf"/>
        </ResourceDictionary>
    </Window.Resources>
    <Grid>
        <DockPanel>
            <Menu IsMainMenu="True" Margin="5,10,5,5" DockPanel.Dock="Top">
                <Menu.Effect>
                    <DropShadowEffect Color="{Binding Background, ElementName=this}" ShadowDepth="7" BlurRadius="15"/>
                </Menu.Effect>
                <MenuItem Header="文件(_F)">
                    <MenuItem.Icon>
                        <Path Data="F1 M 17.5 5.361328 L 17.5 20 L 1.25 20 L 1.25 0 L 12.138672 0 Z M 12.5 5 L 15.361328 5 L 12.5 2.138672 Z M 16.25 18.75 L 16.25 6.25 L 11.25 6.25 L 11.25 1.25 L 2.5 1.25 L 2.5 18.75 Z " Fill="{DynamicResource MaterialDesignToolTipBackground}" Stretch="Uniform" />
                    </MenuItem.Icon>
                    <MenuItem Header="新建(_N)" Tag="cmd:new" Click="OpenLink"/>
                    <MenuItem Header="打开(_O)" Tag="cmd:open" Click="OpenLink"/>
                    <MenuItem Header="保存(_S)" Tag="cmd:save" Click="OpenLink"/>
                    <MenuItem Header="另存为(_S)" Tag="cmd:saveo" Click="OpenLink"/>
                    <Separator/>
                    <MenuItem Header="退出(_E)" Tag="cmd:exit" Click="OpenLink"/>
                </MenuItem>
                <MenuItem Header="编辑(_E)">
                    <MenuItem.Icon>
                        <Path Data="F1 M 19.375 17.5 C 19.54427 17.5 19.690754 17.560221 19.814453 17.680664 C 19.93815 17.801107 20 17.949219 20 18.125 C 20 18.28125 19.94466 18.424479 19.833984 18.554688 C 19.638672 18.782553 19.414062 18.986002 19.160156 19.165039 C 18.90625 19.344076 18.636066 19.495443 18.349609 19.619141 C 18.06315 19.742838 17.766926 19.83724 17.460938 19.902344 C 17.154947 19.967447 16.855469 20 16.5625 20 C 15.917969 20 15.322266 19.874674 14.775391 19.624023 C 14.228516 19.373373 13.733724 19.016928 13.291016 18.554688 C 12.972005 18.222656 12.617188 17.963867 12.226562 17.77832 C 11.835938 17.592773 11.40625 17.5 10.9375 17.5 C 10.481771 17.5 10.053711 17.592773 9.65332 17.77832 C 9.25293 17.963867 8.896484 18.222656 8.583984 18.554688 C 8.583984 18.554688 8.55306 18.583984 8.491211 18.642578 C 8.429361 18.701172 8.354492 18.774414 8.266602 18.862305 C 8.178711 18.950195 8.082682 19.046225 7.978516 19.150391 C 7.874349 19.254557 7.775064 19.352213 7.680664 19.443359 C 7.586263 19.534506 7.504883 19.615885 7.436523 19.6875 C 7.368164 19.759115 7.327474 19.801432 7.314453 19.814453 C 7.190755 19.93815 7.044271 20 6.875 20 C 6.705729 20 6.559244 19.93815 6.435547 19.814453 C 6.311849 19.690756 6.25 19.544271 6.25 19.375 C 6.25 19.205729 6.311849 19.059244 6.435547 18.935547 C 6.787109 18.583984 7.119141 18.245443 7.431641 17.919922 C 7.744141 17.5944 8.069661 17.307943 8.408203 17.060547 C 8.746744 16.813152 9.117838 16.616211 9.521484 16.469727 C 9.92513 16.323242 10.397135 16.25 10.9375 16.25 C 11.582031 16.25 12.177734 16.375326 12.724609 16.625977 C 13.271484 16.876627 13.766275 17.233072 14.208984 17.695312 C 14.527994 18.027344 14.882812 18.286133 15.273438 18.47168 C 15.664062 18.657227 16.09375 18.75 16.5625 18.75 C 17.057291 18.75 17.486979 18.657227 17.851562 18.47168 C 18.216145 18.286133 18.570963 18.027344 18.916016 17.695312 C 18.987629 17.630209 19.057617 17.581381 19.125977 17.548828 C 19.194336 17.516275 19.277344 17.5 19.375 17.5 Z M 12.060547 2.832031 C 12.151692 2.884115 12.226562 2.958984 12.285156 3.056641 C 12.34375 3.154297 12.373047 3.258465 12.373047 3.369141 C 12.373047 3.421225 12.366536 3.470053 12.353516 3.515625 C 12.340494 3.561199 12.324218 3.606771 12.304688 3.652344 L 5.400391 17.470703 C 5.341797 17.5944 5.250651 17.685547 5.126953 17.744141 L 3.4375 18.59375 C 3.229167 18.697916 3.004557 18.75 2.763672 18.75 C 2.73112 18.75 2.700195 18.75 2.670898 18.75 C 2.641602 18.75 2.610677 18.746744 2.578125 18.740234 L 2.119141 19.658203 C 2.067057 19.762369 1.99056 19.845377 1.889648 19.907227 C 1.788737 19.969076 1.679688 20 1.5625 20 C 1.393229 20 1.246745 19.93815 1.123047 19.814453 C 0.999349 19.690756 0.9375 19.544271 0.9375 19.375 C 0.9375 19.296875 0.960286 19.199219 1.005859 19.082031 C 1.051432 18.964844 1.105143 18.842773 1.166992 18.71582 C 1.228841 18.588867 1.292318 18.470053 1.357422 18.359375 C 1.422526 18.248697 1.471354 18.157553 1.503906 18.085938 C 1.334635 17.825521 1.25 17.542318 1.25 17.236328 L 1.25 15.625 C 1.25 15.520834 1.272786 15.426433 1.318359 15.341797 L 6.943359 4.091797 L 6.308594 3.779297 L 3.994141 8.408203 C 3.942057 8.51237 3.86556 8.595378 3.764648 8.657227 C 3.663737 8.719076 3.554688 8.75 3.4375 8.75 C 3.268229 8.75 3.121745 8.688151 2.998047 8.564453 C 2.874349 8.440756 2.8125 8.294271 2.8125 8.125 C 2.8125 8.040365 2.835286 7.945964 2.880859 7.841797 L 5.214844 3.173828 C 5.31901 2.965496 5.458984 2.801107 5.634766 2.680664 C 5.810547 2.560223 6.015625 2.5 6.25 2.5 C 6.477864 2.5 6.694335 2.55534 6.899414 2.666016 C 7.104492 2.776693 7.304687 2.880859 7.5 2.978516 L 8.193359 1.591797 C 8.245442 1.481121 8.321939 1.396484 8.422852 1.337891 C 8.523763 1.279297 8.632812 1.25 8.75 1.25 C 8.834635 1.25 8.90625 1.263021 8.964844 1.289062 C 9.042969 1.132812 9.119466 0.978191 9.194336 0.825195 C 9.269205 0.672201 9.353841 0.533855 9.448242 0.410156 C 9.542643 0.286459 9.658203 0.187176 9.794922 0.112305 C 9.931641 0.037436 10.104166 0 10.3125 0 C 10.520833 0 10.7194 0.048828 10.908203 0.146484 L 11.826172 0.605469 C 12.034505 0.709637 12.198893 0.847982 12.319336 1.020508 C 12.439778 1.193035 12.5 1.39974 12.5 1.640625 C 12.5 1.86198 12.449544 2.068686 12.348633 2.260742 C 12.247721 2.452801 12.151692 2.64323 12.060547 2.832031 Z M 10.087891 1.845703 L 10.9375 2.265625 L 11.220703 1.699219 L 10.371094 1.279297 Z M 10.908203 3.652344 L 9.033203 2.714844 L 2.5 15.771484 L 2.5 17.236328 C 2.5 17.307943 2.526042 17.369791 2.578125 17.421875 C 2.630208 17.473959 2.692057 17.5 2.763672 17.5 C 2.789713 17.5 2.843424 17.483725 2.924805 17.451172 C 3.006185 17.418619 3.100586 17.376303 3.208008 17.324219 C 3.315429 17.272135 3.429362 17.21517 3.549805 17.15332 C 3.670247 17.091471 3.785807 17.03125 3.896484 16.972656 C 4.007161 16.914062 4.104817 16.861979 4.189453 16.816406 C 4.274088 16.770834 4.335938 16.738281 4.375 16.71875 Z " Fill="{DynamicResource MaterialDesignToolTipBackground}" Stretch="Uniform" />
                    </MenuItem.Icon>
                    <MenuItem Header="查找(_F)"/>
                    <MenuItem Header="替换(_H)"/>
                    <MenuItem Header="撤销(_U)"/>
                    <MenuItem Header="重做(_R)"/>
                    <Separator/>
                    <MenuItem Header="剪切(_T)"/>
                    <MenuItem Header="复制(_C)"/>
                    <MenuItem Header="粘贴(_P)"/>
                    <MenuItem Header="打开剪贴板"/>
                    <MenuItem Header="删除(_D)"/>
                    <MenuItem Header="全选(_A)"/>
                </MenuItem>
                <MenuItem Header="格式(_O)">
                    <MenuItem.Icon>
                        <Path Data="F1 M 16.25 8.125 L 20 10 L 16.25 11.875 L 20 13.75 L 10 18.75 L 0 13.75 L 3.75 11.875 L 0 10 L 3.75 8.125 L 0 6.25 L 10 1.25 L 20 6.25 Z M 2.792969 6.25 L 10 9.853516 L 17.207031 6.25 L 10 2.646484 Z M 17.207031 13.75 L 14.853516 12.578125 L 10 15 L 5.146484 12.578125 L 2.792969 13.75 L 10 17.353516 Z M 10 13.603516 L 17.207031 10 L 14.853516 8.828125 L 10 11.25 L 5.146484 8.828125 L 2.792969 10 Z " Fill="{DynamicResource MaterialDesignToolTipBackground}" Stretch="Uniform" />
                    </MenuItem.Icon>
                    <MenuItem>
                        <MenuItem.Header>
                            <CheckBox x:Name="shouldTextWrap" IsChecked="True" Content="自动换行(_W)"/>
                        </MenuItem.Header>
                    </MenuItem>
                    <MenuItem Header="字体(_F)"/>
                </MenuItem>
                <MenuItem Header="查看(_V)">
                    <MenuItem.Icon>
                        <Path Data="F1 M 0 8.75 L 0 0 L 8.75 0 L 8.75 8.75 Z M 1.25 1.25 L 1.25 7.5 L 7.5 7.5 L 7.5 1.25 Z M 0 18.75 L 0 10 L 8.75 10 L 8.75 18.75 Z M 1.25 11.25 L 1.25 17.5 L 7.5 17.5 L 7.5 11.25 Z M 10 18.75 L 10 10 L 18.75 10 L 18.75 18.75 Z M 11.25 11.25 L 11.25 17.5 L 17.5 17.5 L 17.5 11.25 Z M 10 0 L 18.75 0 L 18.75 8.75 L 10 8.75 Z M 17.5 7.5 L 17.5 1.25 L 11.25 1.25 L 11.25 7.5 Z " Fill="{DynamicResource MaterialDesignToolTipBackground}" Stretch="Uniform" />
                    </MenuItem.Icon>
                    <MenuItem Header="状态栏(_S)" Tag="cmd:stater" Click="OpenLink"/>
                    <MenuItem>
                        <MenuItem.Header>
                            <CheckBox x:Name="viewLiner" IsChecked="True" Content="行号(_L)"/>
                        </MenuItem.Header>
                    </MenuItem>
                    <MenuItem Header="高亮 ... (_H)"/>
                </MenuItem>
                <MenuItem Header="帮助(_H)">
                    <MenuItem.Icon>
                        <Path Data="F1 M 8.75 18.75 L 10 18.75 L 10 20 L 8.75 20 Z M 9.375 0 C 9.889322 0 10.385742 0.066732 10.864258 0.200195 C 11.342773 0.33366 11.790364 0.522461 12.207031 0.766602 C 12.623697 1.010742 13.004557 1.30534 13.349609 1.650391 C 13.694661 1.995443 13.989258 2.376303 14.233398 2.792969 C 14.477539 3.209637 14.666341 3.657227 14.799805 4.135742 C 14.933268 4.614259 14.999999 5.110678 15 5.625 C 14.999999 6.171875 14.928385 6.666667 14.785156 7.109375 C 14.641927 7.552084 14.453125 7.957357 14.21875 8.325195 C 13.984375 8.693034 13.717447 9.033203 13.417969 9.345703 C 13.118489 9.658203 12.8125 9.960938 12.5 10.253906 C 12.1875 10.546875 11.88151 10.838217 11.582031 11.12793 C 11.282552 11.417644 11.015625 11.725261 10.78125 12.050781 C 10.546875 12.376303 10.358072 12.727865 10.214844 13.105469 C 10.071614 13.483073 10 13.90625 10 14.375 L 10 16.25 L 8.75 16.25 L 8.75 14.375 C 8.75 13.828125 8.821614 13.333334 8.964844 12.890625 C 9.108072 12.447917 9.296875 12.042644 9.53125 11.674805 C 9.765625 11.306967 10.032552 10.968425 10.332031 10.65918 C 10.63151 10.349936 10.9375 10.048828 11.25 9.755859 C 11.5625 9.462891 11.868489 9.169922 12.167969 8.876953 C 12.467447 8.583984 12.734375 8.27474 12.96875 7.949219 C 13.203125 7.623699 13.391927 7.272137 13.535156 6.894531 C 13.678385 6.516928 13.75 6.09375 13.75 5.625 C 13.75 5.019531 13.634439 4.451498 13.40332 3.920898 C 13.1722 3.390301 12.8597 2.928061 12.46582 2.53418 C 12.071939 2.140301 11.6097 1.827801 11.079102 1.59668 C 10.548502 1.365561 9.980469 1.25 9.375 1.25 C 8.769531 1.25 8.201497 1.365561 7.670898 1.59668 C 7.140299 1.827801 6.67806 2.140301 6.28418 2.53418 C 5.890299 2.928061 5.577799 3.390301 5.34668 3.920898 C 5.11556 4.451498 5 5.019531 5 5.625 L 3.75 5.625 C 3.75 5.110678 3.816731 4.614259 3.950195 4.135742 C 4.083659 3.657227 4.272461 3.209637 4.516602 2.792969 C 4.760742 2.376303 5.055338 1.995443 5.400391 1.650391 C 5.745442 1.30534 6.126302 1.010742 6.542969 0.766602 C 6.959635 0.522461 7.407227 0.33366 7.885742 0.200195 C 8.364258 0.066732 8.860677 0 9.375 0 Z " Fill="{DynamicResource MaterialDesignToolTipBackground}" Stretch="Uniform" />
                    </MenuItem.Icon>
                    <MenuItem Header="查看帮助(_H)"/>
                    <MenuItem Header="发送反馈(_S)"/>
                    <Separator/>
                    <MenuItem Header="关于 NotePads... (_A)"/>
                </MenuItem>
            </Menu>
            <Grid x:Name="Stater" Height="40" Margin="5,5,5,10" Background="{DynamicResource MaterialDesignPaper}" DockPanel.Dock="Bottom">
                <Grid.Effect>
                    <DropShadowEffect Color="{Binding Background, ElementName=this}" ShadowDepth="7" BlurRadius="15"/>
                </Grid.Effect>
                <DockPanel Margin="10,0">
                    <TextBlock Width="90" Foreground="{DynamicResource MaterialDesignToolTipBackground}" Text="{Binding Value, ElementName=FontSizeSlider, Converter={StaticResource fmf}}" Margin="10,0" VerticalAlignment="Center" MinWidth="15"/>
                    <Slider x:Name="FontSizeSlider" MouseRightButtonUp="FontSizeSlider_MouseRightButtonUp" Value="12" Minimum="1" Maximum="256" DockPanel.Dock="Left" VerticalAlignment="Center" Width="140"/>
                    <Grid/>
                </DockPanel>
            </Grid>
            <ScrollViewer Margin="10">
                <popc:TextBoxLines Margin="5,0" EffectiveLiner="False" Foreground="{DynamicResource MaterialDesignToolTipBackground}"
                                   TextWrap="{Binding IsChecked, ElementName=shouldTextWrap, Converter={StaticResource stw}}"
                                   ShowLines="{Binding IsChecked, ElementName=viewLiner}" x:Name="ContentBox"
                                   FontSize="{Binding Value, ElementName=FontSizeSlider}"/>
            </ScrollViewer>
        </DockPanel>
        <materialDesign:Snackbar x:Name="Snackbar_SaveSucceed" IsActive="False"/>

        <ToggleButton x:Name="KeepToper" Width="35" Background="Transparent" Margin="0,18,10,0" HorizontalAlignment="Right" VerticalAlignment="Top" Style="{StaticResource MaterialDesignActionToggleButton}">
            <Path Width="20" Height="20" Fill="{DynamicResource LinearBlue}" Data="F1 M 20 5 L 20 13.75 L 19.375 13.75 C 18.867188 13.75 18.401691 13.640951 17.978516 13.422852 C 17.555338 13.204753 17.190754 12.897136 16.884766 12.5 L 12.060547 12.5 C 11.878255 12.884115 11.650391 13.230795 11.376953 13.540039 C 11.103516 13.849284 10.795898 14.111328 10.454102 14.326172 C 10.112305 14.541016 9.744466 14.707031 9.350586 14.824219 C 8.956705 14.941406 8.548177 15 8.125 15 L 7.5 15 L 7.5 10 L 1.25 10 L 0 9.375 L 1.25 8.75 L 7.5 8.75 L 7.5 3.75 L 8.125 3.75 C 8.548177 3.75 8.956705 3.808594 9.350586 3.925781 C 9.744466 4.042969 10.112305 4.208984 10.454102 4.423828 C 10.795898 4.638672 11.103516 4.900717 11.376953 5.209961 C 11.650391 5.519207 11.878255 5.865887 12.060547 6.25 L 16.884766 6.25 C 17.190754 5.852865 17.555338 5.545248 17.978516 5.327148 C 18.401691 5.109051 18.867188 5.000001 19.375 5 Z M 18.75 6.357422 C 18.59375 6.409506 18.460285 6.47461 18.349609 6.552734 C 18.238932 6.63086 18.139648 6.717123 18.051758 6.811523 C 17.963867 6.905925 17.882486 7.011719 17.807617 7.128906 C 17.732746 7.246094 17.65625 7.369792 17.578125 7.5 L 11.201172 7.5 L 11.054688 7.080078 C 10.872396 6.565756 10.576172 6.129558 10.166016 5.771484 C 9.755859 5.413412 9.283854 5.179037 8.75 5.068359 L 8.75 13.681641 C 9.283854 13.570964 9.755859 13.336589 10.166016 12.978516 C 10.576172 12.620443 10.872396 12.184245 11.054688 11.669922 L 11.201172 11.25 L 17.578125 11.25 C 17.65625 11.380209 17.732746 11.503906 17.807617 11.621094 C 17.882486 11.738281 17.963867 11.844076 18.051758 11.938477 C 18.139648 12.032878 18.238932 12.119141 18.349609 12.197266 C 18.460285 12.275391 18.59375 12.340495 18.75 12.392578 Z "/>
            <materialDesign:ToggleButtonAssist.OnContent>
                <Path Width="20" Height="20" Fill="{DynamicResource LinearWarning}" Data="F1 M 19.433594 7.304688 C 19.21875 7.519531 19.008789 7.716472 18.803711 7.895508 C 18.598633 8.074545 18.387043 8.225912 18.168945 8.349609 C 17.950846 8.473308 17.713215 8.569336 17.456055 8.637695 C 17.198893 8.706055 16.907551 8.740234 16.582031 8.740234 C 16.360676 8.740234 16.149088 8.720703 15.947266 8.681641 L 12.246094 12.382812 C 12.330729 12.630209 12.392578 12.884115 12.431641 13.144531 C 12.470703 13.404948 12.490234 13.665365 12.490234 13.925781 C 12.490234 14.348959 12.447916 14.733073 12.363281 15.078125 C 12.278646 15.423178 12.156575 15.748698 11.99707 16.054688 C 11.837564 16.360678 11.64388 16.65202 11.416016 16.928711 C 11.18815 17.205404 10.930989 17.486979 10.644531 17.773438 L 6.875 14.003906 L 1.328125 19.560547 L 0 20 L 0.439453 18.671875 L 5.996094 13.125 L 2.226562 9.355469 L 2.666016 8.916016 C 3.121745 8.460287 3.644206 8.111979 4.233398 7.871094 C 4.822591 7.630209 5.439453 7.509766 6.083984 7.509766 C 6.617838 7.509766 7.128906 7.591146 7.617188 7.753906 L 11.318359 4.052734 C 11.279297 3.850912 11.259766 3.639324 11.259766 3.417969 C 11.259766 3.098959 11.293945 2.810873 11.362305 2.553711 C 11.430664 2.296551 11.526692 2.057293 11.650391 1.835938 C 11.774088 1.614584 11.925455 1.401367 12.104492 1.196289 C 12.283528 0.991211 12.480469 0.78125 12.695312 0.566406 Z M 16.582031 7.490234 C 16.940104 7.490235 17.278645 7.4056 17.597656 7.236328 L 12.763672 2.402344 C 12.5944 2.721355 12.509765 3.059896 12.509766 3.417969 C 12.509765 3.600262 12.530924 3.77116 12.573242 3.930664 C 12.61556 4.09017 12.66276 4.254558 12.714844 4.423828 L 7.910156 9.21875 C 7.747396 9.153646 7.594401 9.091797 7.451172 9.033203 C 7.307942 8.974609 7.164713 8.925781 7.021484 8.886719 C 6.878255 8.847656 6.730143 8.816732 6.577148 8.793945 C 6.424153 8.771159 6.259766 8.759766 6.083984 8.759766 C 5.712891 8.759766 5.35319 8.813477 5.004883 8.920898 C 4.656575 9.02832 4.332682 9.186198 4.033203 9.394531 L 10.605469 15.966797 C 10.813802 15.667318 10.973307 15.343425 11.083984 14.995117 C 11.194661 14.646811 11.25 14.290365 11.25 13.925781 C 11.25 13.75 11.238606 13.585612 11.21582 13.432617 C 11.193033 13.279623 11.160481 13.129883 11.118164 12.983398 C 11.075846 12.836914 11.025391 12.692058 10.966797 12.548828 C 10.908203 12.4056 10.846354 12.252604 10.78125 12.089844 L 15.576172 7.285156 C 15.745442 7.33724 15.90983 7.38444 16.069336 7.426758 C 16.22884 7.469076 16.399738 7.490235 16.582031 7.490234 Z "/>
            </materialDesign:ToggleButtonAssist.OnContent>
        </ToggleButton>
    </Grid>
</Window>
